{% schema %}
{
  "name": "Virtual Try On",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Virtual Try On"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button Color",
      "default": "#000000"
    }
  ]
}
{% endschema %}

<button
  class="custom-button"
  id="virtualTryOnButton"
  style="background-color: {{ block.settings.button_color }}"
>
  {{ block.settings.button_text }}
</button>

<style>
  .custom-button {
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    color: white;
    font-weight: bold;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const button = document.getElementById('virtualTryOnButton');
    if (button) {
      button.addEventListener('click', function() {
        console.log('Button clicked ');
        // Send a message to the parent window to notify the Remix app.
        window.parent.postMessage({ type: "OPEN_VIRTUAL_TRY_ON" }, "*");
      });
    } else {
      console.error("Virtual try on button not found.");
    }
  });
</script>